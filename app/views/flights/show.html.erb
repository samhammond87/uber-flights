<div class="show-img">
  <%= image_tag @flight.flight_picture if @flight.flight_picture.attached? %>
</div>
<br>
  <h3><%= @flight.title %></h3>
<br>
  <p>
  <strong>Cost:</strong>
  $<%= @flight.cost %>
  <br>
  <strong>Duration:</strong>
  <%= @flight.duration %> hour(s)
  <br>
  <strong>Capacity:</strong>
  <%= @flight.capacity %> people
  <br>
  <strong>Description:</strong>
  <%= @flight.description %>
</p>

<button data-stripe="payment">Buy flight <%= number_to_currency(@flight.cost) %></button>
<br><br>
<%= link_to 'Back', flights_path %>
<% if can? :manage, @flight %>
  <%= link_to 'Edit', edit_flight_path(@flight) %>
  <%= link_to 'Delete', flight_path(@flight), method: :delete, data: { confirm: 'Are you sure?' } %>
<% end %>

<br><br>

<script src="https://js.stripe.com/v3/"></script>


<script>
    document.querySelector("[data-stripe='payment']").addEventListener("click", () => {
        const stripe = Stripe("<%= Rails.application.credentials.dig(:stripe, :public_key) %>");
        stripe.redirectToCheckout({
            sessionId: "<%= @session_id %>"
        });
    });
</script>

<h3>Questions</h3>
<%= render @flight.comments %>


<h3>Add a question:</h3>
<%= render 'comments/form' %>

